html <!DOCTYPE>
<!-- loosely based on https://raw.github.com/acruikshank/c5-d3-lunch-talk/master/solar-system3.html -->
<html>
  <head>
    <title></title>
    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="d3.v2.min.js"></script>
    <style type="text/css">
      body { background: black; margin: 0; padding: 0 }
      svg { width: 1200px; height: 600px; margin:0 auto}
      .step { background: green; }
      #view { position: relative; }
      #detail-view { position: absolute; width: 400px; background: white; color: black; top: 4px; right: 4px; z-index: 100; padding: 6px;}
      #detail-view img { width: 100%; }
      #detail-view p { color: black; font-size: 20px; margin: 0; padding: 0 }
    </style>
  </head>
  <body>
    <div id="view">
      <div id="detail-view">
        <img src="http://pds-rings.seti.org/volumes/VGISS_6xxx/VGISS_6109/BROWSE/C34512XX/C3451210_GEOMED.JPG" />
        <p>Voyager, <span id="clicked-date">YEAR-MM-DD</span></p>
      </div>
    </div>
    <script type="text/javascript">

  var objects = [
    { name:'Mercury', distance:0.3871 },
    { name:'Venus', distance:0.7233 },
    { name:'Earth', distance:1, color: 'green' },
    { name:'Mars', distance:1.5237, color: 'red' },
    { name:'Jupiter', distance:5.2028 },
    { name:'Saturn', distance:9.5550 },
    { name:'Uranus', distance:19.1914 },
    { name:'Neptune', distance:30.1094 },
  ]

  var SCALE = 8;
  function orbit(d) { return d.distance * SCALE; }
  function color(d) { return d.color ? d.color : '#aaa'; }

  var vis = d3.select("#view").append("svg").append('g').attr('transform','translate(300,300) rotate(-90)');

  var orbits = vis.selectAll('ellipse.orbit').data(objects, function(d) { return d.name; });
  orbits
    .enter().append('ellipse').attr('cx',0).attr('cy',0).attr('rx',orbit).attr('ry',orbit)
            .attr('fill', 'none').attr('opacity',1).attr('stroke-width', 1).attr('stroke',color).classed('orbit',true);

  var path = [];
  var current_step = null;

  $.getJSON('./voyager.json', function(data) {
    path = data;

    var path_points = vis.selectAll('ellipse.step').data(path, function(p) { return p[0]; });
    path_points
      .enter().append('ellipse')
        .attr('cx', function(p) { return p[1] * SCALE; }).attr('cy', function(p) { return -p[2] * SCALE; }).attr('rx', 3).attr('ry', 3)
        .attr('fill', 'green').attr('stroke', 'green')
        .attr('opacity', 1).classed('step', true)
        .on("mouseover",function(d,i) { d3.select(this).attr("fill","red"); }) 
        .on("mouseout",function(d,i) { d3.select(this).attr("fill","green"); })
        .on("click",function(d,i) { current_step = d; $("#clicked-date").html(d[0]);})
        .append('svg:title').text(function(p) { return p[0] + ": " + p[1] + "," + p[2];})
        ;
  })
  .fail(function(jqXHR, textStatus, errorThrown) { alert("error" +  textStatus + " " + errorThrown); });

    </script>
  </body>
</html>
